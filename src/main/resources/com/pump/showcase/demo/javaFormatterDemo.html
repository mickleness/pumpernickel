<html>
<body>
<head>
<title>JavaFormatter Demo</title>
</head>
<body>
<h1>JavaFormatter Demo</h1>
<h2>What Is It</h2>
<p>This demo features a few interesting classes:</p>
<ul><li>The <code>JavaFormatter</code> applies color-coded formatting to display Java source code.</li>
<li>The formatter relies on the <code>com.pump.io.parser.java.JavaParser</code> class.</li>
<li>The <code>LineNumberBorder</code> paints the line number on the left side of the scrollpane.</li></ul>
<h2>How To Use It</h2>
<pre>JTextPane textPane = new JTextPane(javaText);
JScrollPane scrollPane = new JScrollPane(textPane);
LineNumberBorder.install(scrollPane, textPane);
new JavaFormatter(textPane);</pre>
<h2>How It Looks</h2>
<p>Below is a screenshot:</p>
<img src="data:image/jvg;base64,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" alt="This is a screenshot of the JavaFormatterDemo">
<h2>How It Works</h2>
<p>The <code>JavaFormatter</code> sets up a few <code>SimpleAttributeSets</code>: defaultAttributes, keywordAttributes, errorAttributes, commentAttributes, stringAttributes, and importantPunctuationAttributes. (They're protected, and in theory you could create a subclass to customize them. Or add getters to modify them.)</p>
<p>The <code>JavaParser</code> then parses a block of java source code, and the <code>getAttributes(..)</code> method decides which AttributeSet to pair with a given token.</p>
<p>The <code>LineNumberBorder</code> is a regular(-ish) <code>javax.swing.Border</code> that is combined with the <code>JScrollPane</code>'s existing <code>Border</code> using a <code>CompoundBorder</code>. (If we put this border on the <code>JTextComponent</code>: then the line number isn't visible when we scroll to the right.)
<h2>Discussion</h2>
<p>I've never tried to use this with a really large Java file, so I haven't focused on performance. If that use case ever comes up it might require some additional work. (Or in a worst-case scenario: it might require avoiding this class altogether if performance becomes a problem?)</p>
<p>This is similar to the <a href="resource:XMLFormatter">XMLFormatter</a>.</p>
</body>
<html>