<html>
<body>
<head>
<title>JavaFormatter Demo</title>
</head>
<body>
<h1>JavaFormatter Demo</h1>
<h2>What Is It</h2>
<p>This demo features a few interesting classes:</p>
<ul><li>The <code>JavaFormatter</code> applies color-coded formatting to display Java source code.</li>
<li>The formatter relies on the <code>com.pump.io.parser.java.JavaParser</code> class.</li>
<li>The <code>LineNumberBorder</code> paints the line number on the left side of the scrollpane.</li></ul>
<h2>How To Use It</h2>
<pre>JTextPane textPane = new JTextPane(javaText);
JScrollPane scrollPane = new JScrollPane(textPane);
LineNumberBorder.install(scrollPane, textPane);
new JavaFormatter(textPane);</pre>
<h2>How It Looks</h2>
<p>Below is a screenshot:</p>
<img src="data:image/jvg;base64,H4sIAAAAAAAAAO1de2wcxRmfvYfj2DgvEiCGNCcnoSGtz48EkuDQ+HyH7StHYpxHS11Rr+/Gdxvv3W525+xzUVvzKA9R1HdEkSpefUgVQlRqUSWkkgCVCkKUoqZ/UKgClFRCBUWtUEv/Sb9v1rt3a58vTpPbs/GctLO789qZ3+/3fbM3N7v35AckaBpkc1LLhvV8Vg+nDVnPKEkzPE6TTDPCh/kunpXTlFgfyU+kBGnQdGrITNFyJiObElC+Dcu35ZmitqmKydr2j5jUGJdHVJqA066CPhHA4nmDbBlKzHm9/Xa1XWNE/Ti2c+TLPkIKOhQchHZePWe5XkVVnbLFlpKCQT49Z6EDGVmnc5RqOXcTiwX8CbIqqSo0xwYMBIYpFGBZmTgij8sWJDfLeleCLEtqOUYLjJEtRcjs+tv6pg86Y1ErG5RYkdQMWqz0KPk6qbehBEA2zW7lrFqKzWz8EmlQzJhi6ppJUwmyckROjqUNLZ9LRTVVMxhZZTVZnmBtPAZaEICO6a4UDhukBJOYBZt0SYIsh5ZAtQqjjKwtrWU6FmsahQY5sGBqL0RgRbqsYErJNQYwBvtv0FyKGkou3Q8RAOr6Yp5BVxJkrjOZoY1BA1aXNJZHQeJyZsg5c1QzsoxsLKanKfAQGR1VcvSgnQFy1xc0I+p0DxAPIoREB8w3YNkwlA1j2fCMsmsK3133+ZNnR/ykLkb82fZ2HnbwsBPDDh7TwWM6Ogv63jOk4mdmegHbsMJpA2+k9NPL71r17e15Hwn2krpRWdUzcpwEx2U1TxPElwTcrix2mdNm8XtAl5O0a4gsHzXSIzw7I76h3iGohJ9h79dz8yNnYdPhA1dvRdXJuq7SsCqPhiNH8zIyaW6OAR3jNHUoPkhNLW8kKUZ/+MCf39x192UP+rhdbcRmFMLmBPAW1rE45imWkHpevPdEywN9Vu4mp5+Y63ePXXv6lb8eNgHbOFmPajoAF5RV5as0FZOZfJgaJthlL1muayCJAxAfJwGT74ImmwRXRNaODtKjeTBPmoowZigjeYa2uq7EVvtlM8PQcaFmc3IWMFljJatyLo2KgrZ3cVSkyAAnpQkDsJKmRD6ppOQQGCFos2DBFZrVZY59sc9jBz5+5J/vn/4e9hkRv5zjDR/EGyM2QS0djqkjHOBIxsElUCMcQbIdMwM/E7WTbMP3TYtmNQcTuxjGLkLW4LI3Trxw2fAf/cTXSxpUTU71ytzfg7VkDGpmNDUFCu3m9fgn6iFEz+NjJGDkVerUibiE4+Bt0tRY886jP/n3Hffu8hHJliAQuaqYb18+O0KNe5784YbGH5x6wHbvfkaCXLdQ6cpi5l5oFHvjg5ce/8ueM/+AKnvtKhGWbXunoDQUCM+BTY9sKknLA8wNDNZ09XQf63gfcQsyAAQMu3VCSbEMz9SKl4PoFIDXii21/HErFmSknudOylaF11gwLeeRR0CNTixkbcwCU0arqsDeqiISsjoyF8luVze/vki8L5LjM5rdfmtAZpnO2GYOsBzItmw1PjyGQ58+sbsdkYCtQeq2vU4k+tpU8SD6HTjAM+cAP8NyocBHJgm4NHGQwMuucS47COMncKrSF54+Emx++QjzkUCc1GWoks4w0ApHOk6kAmyTKAoJUJEes6u3Br2Ce8d7HJweD/G40fHUeLbu/L0rFmu2Sm/AmiLtPKERA7Dwhpu1nGai20xx8y7a60cffWTbaxyDLS42SqwHo7di8BkMPlvUFhd1+1yCxOjOYmY82FEUIB5ch8FODHZhsBuD60sEhkc3lNGIz+LsU32qNiKrITnH0KmC7eTSIZpDTxgao5OMNEfsFJoKOQNzKKuhq+P19swkbVoQmBZxspDVsDVX5tUgW+e+b+MeuOyNG15h2cWXA4Z9brqnpqZsum9dhHRj9C0YDFamDvwy3lYB3iB+qQO26fytaBhwOmmf7vmQeGObZcgoGSvHPsFkVLKj1XP7x0PV44DL/5NvBJg2ggbQiUepEgvAg1H7/PSExybAB5tFO+RcDNm3CNl7IPvtlWTfs7NrynvZjy1pb79dyN4D2e+oKPvbayH7pe3tY0L2Hsj+2oqyf+THx4W391b2h4TsPZD9dRVlf6IWsl/a3n5UyN4D2e+sKPt3hbf3WvYTQvYeyH5XJdlHfa+eEt7eW9nfJ2Tvgex3V5T9pbWQ/dL29j8Ssq++7H0d7aW6756aofvNwt17rftfCN17ofuOirq/Vvh7r3X/rNC9F7p3/VA7S/e9wt97rftXhO690P32irr/gvD3Xuv+LaF7L3Tv+ql2lu4zs3Rf6bkQ/rjLxVhe2H39/FkL2SvaWjDFXm0PEdJzi4tBe8Uxpuy98MXEAUYarGXyuH64aGP+6Y1/GAkqSBrQ2l5xCTVNcXLPZwX19OrYej2Xbk3JTHZdAyNKLuJUeogpqrm5Z5LRiGHIk8VrSEMkgIXwOYuegp43cP/kvy7/T139wVP2Yvh99w/s62tqaG6A46Z4f2zQ7m89Inl466+fg926eCxysHBbcnh4+KH7717/enfgkuO7Sewy30Opd7/yX7xc/MZ9sad6hu8ssFmP+uhgNPUparIKoM72WNKz1dM+V7rQOwkgBL93UyLZuTDtZQxeqeA6pVc5V3/IY/g6RPaXkZPkyGnwLXon7FaWyOklsozUPU4e/vvGkzGXkLDGP1lcnXQ1UbrDVo5QzUJRjWPI/59qEvNxQpe6nNDboaZv+skNz/ge6mvf8Pb8lMPVc7dQzkJRjnThyinnb7gb48q58tTaXxGXv+lPTvmI/wmSfu828ua5VSM1lzTRL1SzUFRzgaNUbI5RylLNxnUv3g+7Rls1WE+QSHVr80/MTzHOCCUUs2AUc4F+5sb5+JlLbMV0T+0Ahkn6kaljP5ufZJyhSUhmQUjmItzU3DKfm5orSoembl9oReDs2bN7m+6RMl9sfP7Y376fOLd8StsqbRDyWSjyucAx6qb5fJNaY8tn6s4d94Byfi6Rxtf8LydaPxefn3DsoUoIZ+EI5wL9zvnN6MBQdYV0AqSz/y6Z0K2Nz9/U9HZ2ftqxx6xy2jmfif7uPeW1YyNa5kH5YZ6wAgOe2F+wX19hhYtXU3g/cBVsd0HUVdjastP+Thb+uSjT/ufFwlUzWJCKLPB061Hpb5BD0xPLvsziYmR6InbLQVpgraZOk8qokpz7bQUbE9FYqH+wr8edBV+JNPOVBWW4dX5aWKbLyTE5zV+FY/++YPfEefB3oNzsRdWIPoe5WQ69eRGSi6Lkyjw6T3KkUCktPcO1ogXbPLn04PcntayLgClBgLf6D7vgf1rA763+NSPtIuC4IKCW+j8j4PdW/znKSgmIkloSkF56BEhdLvivWADw+zKL9rvFecNfp2R1zXCZgN0Q5wHKPcIHVdcE3F8BugX8nsIfwNc7uhgYFgx4awAVvwMI+KttAPhCXRcDxwUDNTSAmfegAv5qw7/NBX99LeEXXwFW1Vr9vBbrpwbyLXsNuz+xFKjwt21z2YLdCoeMx2vgivyJpUPAqtC2UExL5rM0x/izGxXZeFGwUV1zCG1rq0jAaTE9UVUC6vT8iKokK3EQDYi7o6pyUHl6wlv4l6AJBJOqbJouCoaFBdTSAo4L+D2F39+raS4CXhME1FD/M6cnBPzVhv92F/z1Av6aup/IozMIuFoQUF39by2Fv6ddwO8t/Ne44B8Q8HsLv/vmUxfwewu/a/DtuW8BwL+UZuDWtLWF5JzGMtQIJbUsTou6+AjN4GOnMIeq8lF3YNJk1L1keiYH/YKD6rqkisslBPxVXzKdd/ug44KAWur/jIDfU/iX6YaSY6rrl8lZc0KChCrbgOs7cXRXreHntVhrJlqJ/U+2gTuWAhXBll5Na3HR0V1rOpaaNbimKKKZWsIvFnDNnKIQ6q8y/F8rhX/W9PStAn4P4bfb4MB/pOyLFBryBukcSjhvYcUl2GFVMVl4/4hJjXF8CUACTjfzl6/iEc1Ro+uXHQ8f+82e9zQfsV6zSqCaTUMJfIKhEDYnlFw6TMdpjoWjGTmXpk6539affH/s2ZEHS8u1lL08FnGKrX/mqUd979AbnWJ64X+9nF9IcIsAAA==" alt="This is a screenshot of the JavaFormatterDemo">
<h2>How It Works</h2>
<p>The <code>JavaFormatter</code> sets up a few <code>SimpleAttributeSets</code>: defaultAttributes, keywordAttributes, errorAttributes, commentAttributes, stringAttributes, and importantPunctuationAttributes. (They're protected, and in theory you could create a subclass to customize them. Or add getters to modify them.)</p>
<p>The <code>JavaParser</code> then parses a block of java source code, and the <code>getAttributes(..)</code> method decides which AttributeSet to pair with a given token.</p>
<p>The <code>LineNumberBorder</code> is a regular(-ish) <code>javax.swing.Border</code> that is combined with the <code>JScrollPane</code>'s existing <code>Border</code> using a <code>CompoundBorder</code>. (If we put this border on the <code>JTextComponent</code>: then the line number isn't visible when we scroll to the right.)
<h2>Discussion</h2>
<p>I've never tried to use this with a really large Java file, so I haven't focused on performance. If that use case ever comes up it might require some additional work. (Or in a worst-case scenario: it might require avoiding this class altogether if performance becomes a problem?)</p>
<p>This is similar to the <a href="resource:XMLFormatter">XMLFormatter</a>.</p>
</body>
<html>