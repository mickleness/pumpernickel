<!DOCTYPE html>
<html>
<head>
<title>ImageLoader Demo</title>
</head>
<body>
<h1>ImageLoader Demo</h1>
<h2>What Is It</h2>
<p>The <code>ImageLoader</code> converts a <code>java.awt.Image</code> into a <code>java.awt.image.BufferedImage</code>.</p>
<h2>How To Use It</h2>
<p>There are three static methods:</p>
<pre>public QBufferedImage createImage(Image image)
public QBufferedImage createImage(File file)
public QBufferedImage createImage(URL url)</pre>
<p>Also three additional methods let you specify the image type (like <code>BufferedImage.TYPE_INT_ARGB</code>, or <code>BufferedImage.TYPE_3BYTE_BGR</code>):</p>
<pre>public QBufferedImage createImage(Image image, int imageType)
public QBufferedImage createImage(File file, int imageType)
public QBufferedImage createImage(URL url, int imageType)</pre>
<h2>How It Works</h2>
<p>It calls <code>Image.getSource()</code> to identify the <code>ImageProducer</code>. Then it attaches a custom <code>ImageConsumer</code> and populates a <code>BufferedImage</code> as image data becomes available.</p>
<p>If you specify a specific image type then the <code>com.pump.image.pixel.ImageType</code> classes are used to convert from one pixel type to another.</p>
<h2>Discussion</h2>
<p>Nothing about this class is especially clever, but it manages a lot of the tedious nuts and bolts of managing pixel data for you.</p>
<p>Originally I intended for the <code>ImageLoader</code> class to be an alternative to the <code>MediaTracker</code> class. But now with hindsight: now I think the <code>ImageLoader</code> is mostly an alternative to loading images with <code>ImageIO</code>. Both approaches produces a <code>BufferedImage</code>, which is nearly always what I prefer instead of a cryptic <code>java.awt.Image</code> from the <code>Toolkit</code>.</p>
<p>I'm not an expert regarding the <code>MediaTracker</code>, but I poked around a little bit and I found that internally it actually has a very similar approach to the <code>ImageLoader</code>: the <code>sun.awt.image.ImageRepresentation</code> also listens for pixel data and constructs a similar <code>BufferedImage</code>. If that class were part of the Java API I might not written the <code>ImageLoader</code>, but as it stands now: that class remains part of the <code>sun</code> package (although it is <code>public</code>).</p>
<p>Once I realized I was comparing the <code>ImageLoader</code> to <code>ImageIO</code>: I considered discarding the <code>ImageLoader</code>. They produce the same BufferedImage, and obviously <code>ImageIO</code> has a lot more work put into it. (You can swap parsers, read metadata, etc.) But to my surprise when I started measuring performance: it outperformed <code>ImageIO</code> for JPGs (but not PNGs). As of this writing (summer of 2022) on my Mac laptop this demo presents results resembling:</p>
<br><img src="data:image/jvg;base64,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" alt="ImageLoader and MediaTracker takes .9 s, ImageIO takes 2.4 s"/>
</body>
</html>