<html>
<body>
<head>
<title>XMLFormatter Demo</title>
</head>
<body>
<h1>XMLFormatter Demo</h1>
<h2>What Is It</h2>
<p>This demo features a few interesting classes:</p>
<ul><li>The <code>XMLFormatter</code> applies color-coded formatting to display XML.</li>
<li>The formatter relies on the <code>com.pump.io.parser.xml.XMLParser</code> class.</li>
<li>The <code>LineNumberBorder</code> paints the line number on the left side of the scrollpane.</li></ul>
<h2>How To Use It</h2>
<pre>JTextPane textPane = new JTextPane(xmlText);
JScrollPane scrollPane = new JScrollPane(textPane);
LineNumberBorder.install(scrollPane, textPane);
new XMLFormatter(textPane);</pre>
<h2>How It Looks</h2>
<p>Below is a screenshot:</p>
<img src="data:image/jvg;base64,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" alt="This is a screenshot of the XMLFormatterDemo">
<h2>How It Works</h2>
<p>The <code>XMLFormatter</code> sets up a few <code>SimpleAttributeSets</code>: defaultAttributes, elementNameAttributes, errorAttributes, commentAttributes, stringAttributes, and importantPunctuationAttributes. (They're protected, and in theory you could create a subclass to customize them. Or add getters to modify them.)</p>
<p>The <code>XMLParser</code> then parses a block of XML, and the <code>getAttributes(..)</code> method decides which AttributeSet to pair with a given token.</p>
<p>The <code>LineNumberBorder</code> is a regular(-ish) <code>javax.swing.Border</code> that is combined with the <code>JScrollPane</code>'s existing <code>Border</code> using a <code>CompoundBorder</code>. (If we put this border on the <code>JTextComponent</code>: then the line number isn't visible when we scroll to the right.)
<h2>Discussion</h2>
<p>This project's <code>XMLParser</code> class is not intended to be a fully-functional XML parser. It supports what I call "everyday XML". And maybe I'll scale it up as needed, or you can swap it out with something else as needed. (I did experiment with a couple of existing parsers, but I found they didn't give me the exact positions of each token. If anyone has any leads for an XML parser that I should try, please let me know!)</p>
<p>Also I've never tried to use this with a really large XML file, so I haven't focused on performance. If that use case ever comes up it might require some additional work. (Or in a worst-case scenario: it might require avoiding this class altogether if performance becomes a problem?)</p>
<p>This is similar to the <a href="resource:JavaFormatter">JavaFormatter</a>.</p>
</body>
<html>