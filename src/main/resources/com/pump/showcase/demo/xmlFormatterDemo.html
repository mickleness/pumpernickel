<html>
<body>
<head>
<title>XMLFormatter Demo</title>
</head>
<body>
<h1>XMLFormatter Demo</h1>
<h2>What Is It</h2>
<p>This demo features a few interesting classes:</p>
<ul><li>The <code>XMLFormatter</code> applies color-coded formatting to display XML.</li>
<li>The formatter relies on the <code>com.pump.io.parser.xml.XMLParser</code> class.</li>
<li>The <code>LineNumberBorder</code> paints the line number on the left side of the scrollpane.</li></ul>
<h2>How To Use It</h2>
<pre>JTextPane textPane = new JTextPane(xmlText);
JScrollPane scrollPane = new JScrollPane(textPane);
LineNumberBorder.install(scrollPane, textPane);
new XMLFormatter(textPane);</pre>
<h2>How It Looks</h2>
<p>Below is a screenshot:</p>
<img src="data:image/jvg;base64,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" alt="This is a screenshot of the XMLFormatterDemo">
<h2>How It Works</h2>
<p>The <code>XMLFormatter</code> sets up a few <code>SimpleAttributeSets</code>: defaultAttributes, elementNameAttributes, errorAttributes, commentAttributes, stringAttributes, and importantPunctuationAttributes. (They're protected, and in theory you could create a subclass to customize them. Or add getters to modify them.)</p>
<p>The <code>XMLParser</code> then parses a block of XML, and the <code>getAttributes(..)</code> method decides which AttributeSet to pair with a given token.</p>
<p>The <code>LineNumberBorder</code> is a regular(-ish) <code>javax.swing.Border</code> that is combined with the <code>JScrollPane</code>'s existing <code>Border</code> using a <code>CompoundBorder</code>. (If we put this border on the <code>JTextComponent</code>: then the line number isn't visible when we scroll to the right.)
<h2>Discussion</h2>
<p>This project's <code>XMLParser</code> class is not intended to be a fully-functional XML parser. It supports what I call "everyday XML". And maybe I'll scale it up as needed, or you can swap it out with something else as needed. (I did experiment with a couple of existing parsers, but I found they didn't give me the exact positions of each token. If anyone has any leads for an XML parser that I should try, please let me know!)</p>
<p>Also I've never tried to use this with a really large XML file, so I haven't focused on performance. If that use case ever comes up it might require some additional work. (Or in a worst-case scenario: it might require avoiding this class altogether if performance becomes a problem?)</p>
<p>This is similar to the <a href="resource:JavaFormatter">JavaFormatter</a>.</p>
</body>
<html>